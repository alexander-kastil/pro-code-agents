RESOURCE_GROUP="rg-pro-code-agents"
RESOURCE_NAME="pro-code-agents-resource"
DEPLOYMENT_NAME="gpt-35-turbo"
MODEL_NAME="gpt-35-turbo"
MODEL_VERSION="0301"
MODEL_FORMAT="OpenAI"
SKU_NAME="Standard"
SKU_CAPACITY="50"

echo "Deploying model to Azure AI Foundry"
echo "===================================="
echo "Resource Group: $RESOURCE_GROUP"
echo "Resource: $RESOURCE_NAME"
echo "Deployment Name: $DEPLOYMENT_NAME"
echo "Model: $MODEL_NAME"
echo "Version: $MODEL_VERSION"
echo ""

# Create the deployment
echo "Creating deployment..."
az cognitiveservices account deployment create \
    --resource-group $RESOURCE_GROUP \
    --name $RESOURCE_NAME \
    --deployment-name $DEPLOYMENT_NAME \
    --model-name $MODEL_NAME \
    --model-version $MODEL_VERSION \
    --model-format $MODEL_FORMAT \
    --sku-name $SKU_NAME \
    --sku-capacity $SKU_CAPACITY

echo ""
echo "Deployment completed!"
echo ""

# List all deployments
echo "Listing all deployments:"
az cognitiveservices account deployment list \
    --resource-group $RESOURCE_GROUP \
    --name $RESOURCE_NAME \
    --query "[].{Name:name, Model:properties.model.name, Version:properties.model.version, Capacity:properties.sku.capacity}" \
    --output table

echo ""
echo "Done!"
